<!-- Add favicon -->
<link href="{{ site.baseurl }}/assets/images/logo/favicon.png" rel="icon" type="image/png">

{% if site.dark_theme_css %}
<!-- Dark Mode -->
<link href="{{ '/assets/css/main.css' | relative_url }}" id="theme-css" rel="stylesheet">
<link href="{{ site.dark_theme_css | relative_url }}" id="theme-css-dark" rel="stylesheet alternate">

<script type="text/javascript">
    const updateNodesRel = theme => {
        const node_light = document.getElementById('theme-css');
        const node_dark = document.getElementById('theme-css-dark');

        if (theme === "dark") {
            node_light.setAttribute('rel', 'stylesheet alternate');
            node_dark.setAttribute('rel', 'stylesheet');
        } else if (theme === "light") {
            node_light.setAttribute('rel', 'stylesheet');
            node_dark.setAttribute('rel', 'stylesheet alternate');
        }
    }

    const changeTheme = () => {
        let theme = sessionStorage.getItem('theme');

        // Change the theme to the other option
        if (theme === "light") {
            theme = "dark";
        } else {
            theme = "light";
        }

        // Update the stored session and the nodes' rel attribute
        sessionStorage.setItem('theme', theme);
        updateNodesRel(theme);

        return false;
    }

    if (sessionStorage.getItem('theme') === null) {
        sessionStorage.setItem('theme', "light");
    }

    const theme = sessionStorage.getItem('theme');
    updateNodesRel(theme);
</script>
{% endif %}